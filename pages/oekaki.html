<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>VIRTUAL DIVA</title>
        <link rel="shortcut icon" href="https://files.catbox.moe/j2aivj.gif">
        <link href="/style.css" rel="stylesheet" type="text/css" media="all">
        <script src="https://kit.fontawesome.com/f936906ae0.js" crossorigin="anonymous"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    </head>
    <style>
        body{
            background-color:var(--bg);
            text-align:center;
            margin:10px;
            padding:0;
            overflow-x:hidden;
            animation:fadeEffect 0.5s;
            height:100%;
            background-color: #ffffff;
            opacity: 1;
            background-image:  linear-gradient(#34f2ff 0.4px, transparent 0.4px), linear-gradient(to right, #34f2ff 0.4px, #ffffff 0.4px);
            background-size: 18px 18px;
        }
        
        @keyframes fadeEffect {
            from {opacity: 0;}
            to {opacity: 1;}
        }
        
        #container {
            height: 100%;
            display: flex;
            justify-content: center;
        }

        #toolbar {
            display: flex;
            flex-direction: column;
            padding: 5px;
            width: 70px;
            background-color: #202020;
        }
        
        #drawing-board{
            background-color:white;
            border:var(--bw) var(--bt) var(--bc);
        }
        
        #drawing-board:hover{
            cursor:url('https://adilene.neocities.org/pen.png'), sw-resize;
        }
        
        #toolbar {
            display:flex;
            flex-direction: column;
            padding: 10px;
            width: 120px;
            text-align:center;
            background-color: var(--h);
            border:var(--bw) var(--bt) var(--bc);
            border-right:0;
            height:100%;
        }

        #toolbar * {
            margin-bottom:10px;
        }
        
        #toolbar input {
            width: 100%;
            border:var(--bw) var(--bt) var(--bc);
        }
        
        #toolbar input{
            border:var(--bw) var(--bt) var(--bc);
            background-color:white;
        }

        .thumbnail img{
            width:100%;
            height: 350px;
            object-fit: cover;
            box-sizing: border-box;
            padding:10px;
            background-color:#dbfcff;
            border: var(--bw) var(--bt) var(--bc);
            display:block;
        }

        .thumbnail img:hover{
            opacity:0.8;
            transition:0.3s;
        }

        .wrap{
            width:100%;
            margin:auto;
            gap:10px;
            display: flex;
            flex-wrap:wrap;
            justify-content: center;
        }
        
        .wrap div{
            width:calc(50% - 5px);
        }
        
        .wrap div div{
            width:100%;
        }
        
        canvas {
            touch-action: none;
        }
        
        input::file-selector-button {
            border: var(--bw) var(--bt) var(--bc);
            outline: none;
            padding: 5px 8px;
            background-color: #dbfcff;
            font-family: 'Pixel Operator';
            font-size:16px;
            margin:2px 10px;
            transition:0.2s;
            color:#e74492;
        }
        
         input::file-selector-button:hover {
            background-color: #e74492;
            color:white;
            transition:0.2s;
            cursor:url('https://files.catbox.moe/h0vf27.png'), pointer;
        }
        
        #name input, #url input{
            border:var(--bw) var(--bt) var(--bc);
            background-color:white;
        }
        
        #myFile{
            font-family:'Pixel Operator';
            font-size:20px;
        }
    
        .mobile{
            display:none;
        }
        
        .desc{
            padding:5px 10px;
            border-left:var(--bw) var(--bt) var(--bc);
            border-bottom:var(--bw) var(--bt) var(--bc);
            border-right:var(--bw) var(--bt) var(--bc);
            box-sizing:border-box;
            background-color:white;
        }
        
        @media only screen and (max-width: 1250px) {
            #container{
                display:none;
            }
            
            .mobile{
                display:block;
            }
        }
    </style>
    <body>
        <div class="mobile">Your screen is too small! View this page on desktop to draw!</div>
        
        <section id="container">
            <div id="toolbar">
                <header>OEKAKI</header>
                <label for="stroke">Stroke Color</label>
                <input id="stroke" name="stroke" type="color">
                <label for="lineWidth">Line Width</label>
                <input id="lineWidth" name="lineWidth" type="number" value="3">
                <button id="pen">Pen</button>
                <button id="erase">Eraser</button>
                <button class="download" onclick="save()">Save</button>
                <div>Feel free to upload your images for a chance to be featured!</div>
                <br><br><br><br><br><br><br>
                <button id="clear" style="margin-bottom:0px">Clear</button>
            </div>
            <div class="drawing-board">
                <canvas id="drawing-board" height="646" width="1095"></canvas>
            </div>
        </section>
        
        <br>
        <header>GALLERY</header>
        
        <form name="contact" netlify>
            <p>
                <label id="name">Name: <input type="text" name="name" required/></label>
            </p>
            <p>
                <label id="url">Site URL: <input type="text" name="url"/></label>
            </p>
            <p>
                <input type="file" id="myFile" name="filename" required>
            </p>
            <p>
                <button type="submit">Send</button>
            </p>
        </form>
        
        <div class="wrap">
            <div>
                <a class="thumbnail" href="https://files.catbox.moe/n4su5l.png" target="_blank">
                    <img src='https://files.catbox.moe/n4su5l.png'>
                </a>
                <div class="desc"><a href="https://bebetcy.neocities.org/">by @zuri</a></div>
            </div>
            
            <div>
                <a class="thumbnail" href="https://files.catbox.moe/965blz.png" target="_blank">
                    <img src="https://files.catbox.moe/965blz.png">
                </a>
                <div class="desc">by @cactus</div>
            </div>

            <div>
                <a class="thumbnail" href="https://adilene.neocities.org/images/features/tslxkp.png" target="_blank">
                    <img src="https://adilene.neocities.org/images/features/tslxkp.png">
                </a>
                <div class="desc"><a href="https://meko.neocities.org/">by @meko</a></div>
            </div>
            
            <div>
                <a class="thumbnail" href="https://adilene.neocities.org/images/features/65kcfi.png" target="_blank">
                    <img src="https://adilene.neocities.org/images/features/65kcfi.png">
                </a>
                <div class="desc"><a href='https://chipsfunfun.neocities.org/'>by @chippy</a></div>
            </div>

            <div>
                <a class="thumbnail" href="https://adilene.neocities.org/images/features/6QJLJaW.png" target="_blank">
                    <img src="https://adilene.neocities.org/images/features/6QJLJaW.png">
                </a>
                <div class="desc"><a href="https://pip-pepping.neocities.org/">by @Pepyo</a></div>
            </div>
            
            <div>
                <a class="thumbnail" href="https://adilene.neocities.org/images/features/4fbfdd.png" target="_blank">
                   <img src="https://adilene.neocities.org/images/features/4fbfdd.png">
                </a>
                <div class='desc'><a href="https://mirrorteru.neocities.org/">by @mirrorteru</a></div>
            </div>
            
            <div>
                <a class="thumbnail" href="https://adilene.neocities.org/images/features/0vvn67.png" target="_blank">
                    <img src="https://adilene.neocities.org/images/features/0vvn67.png">
                </a>
                <div class='desc'><a href="https://pklucky.neocities.org/">by @PKLucky</a></div>
            </div>
            
            <div>
                <a class="thumbnail" href="https://adilene.neocities.org/images/features/9p0nw2.png">
                    <img src="https://adilene.neocities.org/images/features/9p0nw2.png">
                </a>
                <div class="desc"><a href="https://moonlightgamingyt.neocities.org/">by @MoonlightGamingYT</a></div>
            </div>
        </div>
 
        
        <script>
            const canvas = document.getElementById('drawing-board');
            const toolbar = document.getElementById('toolbar');
            const ctx = canvas.getContext('2d');

            const canvasOffsetX = canvas.offsetLeft;
            const canvasOffsetY = canvas.offsetTop;

            let isPainting = false;
            let lineWidth = 5;
            let startX;
            let startY;

            toolbar.addEventListener('click', e => {
                if (e.target.id === 'clear') {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                }
                if (e.target.id === 'erase') {
                    ctx.globalCompositeOperation = 'destination-out';
                }
                if (e.target.id === 'pen') {
                    ctx.strokeStyle = e.target.value;
                    ctx.globalCompositeOperation = 'source-over'
                }
            });

            toolbar.addEventListener('change', e => {
                if(e.target.id === 'stroke') {
                    ctx.strokeStyle = e.target.value;
                }

                if(e.target.id === 'lineWidth') {
                    lineWidth = e.target.value;
                }

            });

            const draw = (e) => {
                if(!isPainting) {
                    return;
                }

                ctx.lineWidth = lineWidth;
                ctx.lineCap = 'round';

                ctx.lineTo(e.clientX - canvasOffsetX, e.clientY);
                ctx.stroke();
            }

            canvas.addEventListener('mousedown', (e) => {
                isPainting = true;
                startX = e.clientX;
                startY = e.clientY;
            });

            canvas.addEventListener('mouseup', e => {
                isPainting = false;
                ctx.stroke();
                ctx.beginPath();
            });

            canvas.addEventListener('mousemove', draw);

            
            function save(){
                var canvas = document.querySelector("#drawing-board");
                var image = canvas.toDataURL("image/png").replace("image/png", "image/octet-stream");

                var element = document.createElement('a');
                var filename = 'drawing.png';
                element.setAttribute('href', image);
                element.setAttribute('download', filename);
                element.click();
            }
        </script>
    </body>
</html>